# やりたいことリスト

- 細々した機能
    - [ ] 画面のデザインを考える
    - [ ] 画面遷移の図を作る
    - [ ] js で任意のデータをプラグインのホスト側のストレージに保存/読込できるようにする
    - [ ] 開いている js ファイルのパスを記憶し、次開いた時にファイルがあればそれを読むようにする
        - ファイルが存在しなかったとしても特にエラーにはせず、パスの参照を解除するのみ
    - [ ] js から envelope を読み取れるようにする
        - envelope は 4 つ固定とする
        - js 側から任意の envelope を設定できるようにすることもできそうだけど、複雑になりそう
    - [ ] js をもっと使いやすい感じに整える
        - 鍵盤押したらその音の正弦波が鳴る、みたいなコードは 1 行ぐらいで書けるようにしたい
        - 事前に読み込まれるライブラリ的なものを用意してもいいかも
            - MIDI イベントを元に鍵盤の状態を管理してくれるやつとか
            - ノコギリ波を生成してくれるやつとか
    - [ ] js で UI を構築できるようにする
        - [ ] N 角形の線、面を描画できる
            - egui では非凸角形の図形描画に対応していないが、これは lyon で凸分解することで解決できそう
        - [ ] テキストを描画できる
            - egui のデフォルトのフォントライセンスは OFL-1.1 と UFL-1.0 でライセンス的に不安があるので、できれば依存から外したい
                - 依存から外すには egui を更新して features の [`egui/default_fonts`](https://github.com/emilk/egui/blob/59d71831fd43139bf9b427b779a241099b9c9826/crates/epaint/Cargo.toml#L32) を無効化する必要がある
            - 代わりに Apache-2.0 ライセンスの [Roboto](https://github.com/googlefonts/roboto) が良さそうに思う
                - cargo about でライセンス管理するにはフォントファイルを一旦 crate として扱う必要がありそう
                - このやり方に関しては [egui/epaint\_default\_fonts](https://github.com/emilk/egui/tree/59d71831fd43139bf9b427b779a241099b9c9826/crates/epaint_default_fonts) クレートを見習うと良さそう
        - [ ] マウスイベントを受け取ることができる
        - [ ] ボタンやつまみ、グラフ表示などの標準ライブラリを用意する
    - [ ] console.log が画面に出るようにする
    - [ ] エラーメッセージが画面に出るようにする
    - [ ] 何らかのオプションでログをテキストファイルにも出力されるようにしたい
    - [ ] エラー周りの整理
        - [ ] 一度コンパイルエラー/ランタイムエラーになったら js が変更されるまで実行しないようにする
        - [ ] unwrap はパニックの元なので、適切にエラーハンドリングされるようにする
        - [ ] コードの一番大元のところで panic をキャッチして、そのトレースが画面上で確認できるようにする
            - Rust には [`panic::set_hook`](https://doc.rust-lang.org/std/panic/struct.PanicInfo.html#method.location) という仕組みがあり、 panic 時に任意の処理を実行できるらしい
    - [ ] `ps88/runtime/*` がごちゃついてきたのでリファクタリング
    - [ ] js の高度なデバッガー機能
        - [ ] ブレークポイント/ステップ実行
        - [ ] Chrome のパフォーマンスプロファイラみたいなツール
    - [ ] テスト拡充
    - [ ] README.md 等を英語にする
        - 英語圏の方が人が多いので、多くの人に使ってもらえそう
    - [ ] GitHub Actions で CI 構築
    - [ ] チュートリアルのページを作る
    - [ ] リリースタグを打ったら各 OS へのリリースビルドが自動生成されるような GitHub Actions を構築する
        - clap or vst3 ファイルと共に LICENSE / CREDITS も同梱する
- その他
    - [ ] 依存ライブラリを更新する
        - [ ] rusty\_v8
        - [ ] nih-plug
    - [ ] GUI のレンダリングを opengl から wgpu に切り替える
        - https://github.com/BillyDM/egui-baseview/pull/18 が nih-plug に取り込まれれば簡単に実現できそう
    - [ ] GUI 上に js エディタを置く
        - 現時点では MacOS の Reaper 上からだとキー入力を受け付けられないため、それを直す必要がある
        - https://github.com/RustAudio/baseview/issues/169 で解決される可能性はある
- 非常に大変な目標
    - [ ] 楽器の共有サイトを作る
        - イメージとしては Unity Hub みたいなもの
        - 機能
            - 楽器やエフェクトの投稿
            - 楽器やエフェクトの検索
            - いいね、ブックマーク機能
            - ブラウザ上での試奏機能
            - ブラウザ上での簡易的な MIDI 編集機能
            - 投稿した作品のサンプルとして再生する MIDI の登録
                - 動画で言うところのサムネイルみたいなイメージ
            - ユーザ登録
            - 作品のプラグインへのインポート
    - [ ] プロモーションビデオを作る
    - [ ] PS88 でお金を稼ぐ
    - [ ] PS88 で生計を立てる
